---
name: nfsbroker

templates:
  ctl.erb: bin/nfsbroker_ctl

packages:
- golang-nfsvolume
- nfsbroker

properties:
  nfsbroker.username:
    description: "Basic auth username to verify on incoming Service Broker requests"
    default: "admin"
  nfsbroker.password:
    description: "Basic auth password to verify on incoming Service Broker requests"
  nfsbroker.listen_addr:
    description: "(optional) address nfsbroker listens on"
    default: "0.0.0.0:8999"
  nfsbroker.service_name:
    description: "(optional) name of the service to be registered with cf"
    default: "nfs"
  nfsbroker.service_id:
    description: "(optional) Id of the service to be registered with cf"
    default: "nfs-service-guid"
  nfsbroker.data_dir:
    description: "(optional) Directory on broker VM to persist instance and binding state"
    default: "/var/vcap/store/nfsbroker"
  nfsbroker.db_driver:
    default: ""
    description: "(optional) database driver name when using SQL to store broker state"
  nfsbroker.db_username:
    default: ""
    description: "(optional) database username when using SQL to store broker state"
  nfsbroker.db_password:
    default: ""
    description: "(optional) database password when using SQL to store broker state"
  nfsbroker.db_hostname:
    default: ""
    description: "(optional) database hostname when using SQL to store broker state"
  nfsbroker.db_port:
    default: ""
    description: "(optional) database port when using SQL to store broker state"
  nfsbroker.db_name:
    default: ""
    description: "(optional) database name when using SQL to store broker state"
  nfsbroker.db_ca_cert:
    default: ""
    description: "(optional) CA Cert to verify SSL connection, if not include, connection will be plain"
  nfsbroker.allowed-in-source:
    description: "Comma separated list of white-listed options that may be configured in supported in the mount_config.source URL query params. If a non-white-listed option is received from a user as arbitrary params, then the broker will reject the user request."
    example: "uid,gid,auto-traverse-mounts,dircache"
    default: "uid,gid"
  nfsbroker.default-in-source:
    description: "This is a comma separted list of like params:value. This list specify default value of parameters. If parameters has default value and is not in allowed list, this default value become a forced value who's cannot be override"
    example: "gid=1000,auto-traverse-mounts=1"
    default: ""
  nfsbroker.allowed-in-mount:
    description: "This is a comma separted list of parameters allowed to be send in extra config. Each of this parameters can be specify by brokers"
    example: ""
    default: ""
  nfsbroker.default-in-mount:
    description: "This is a comma separted list of like params:value. This list specify default value of parameters. If parameters has default value and is not in allowed list, this default value become a forced value who's cannot be override"
    example: ""
    default: ""

