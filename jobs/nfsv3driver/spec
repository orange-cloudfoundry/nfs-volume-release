---
name: nfsv3driver

templates:
  install.erb: bin/pre-start
  ctl.erb: bin/nfsv3driver_ctl

packages:
- fuse-nfs
- nfsv3driver

properties:
 nfsv3driver.listen_addr:
    description: "address nfsv3driver listens on"
    default: "127.0.0.1:7589"
 nfsv3driver.debug_addr:
   description: "address nfsv3driver will serve debug info"
   default: "127.0.0.1:7689"
 nfsv3driver.driver_path:
   description: "path to place driver spec/json file for volman to discover"
   default: "/var/vcap/data/voldrivers"
 nfsv3driver.cell_mount_path:
   description: "path to mount volumes into on the cell"
   default: "/var/vcap/data/volumes/nfs"
 nfsv3driver.log_level:
   description: "nfsv3driver log level"
   default: "info"
 nfsv3driver.disable:
   description: "disable nfsv3driver"
   default: false
 nfsv3driver.config:
   description: "(optional) location for the nfsv3driver config file"
   default: "./config.yml"
 nfsv3driver.source_params:
   description: "Comma separated list of white-listed options that may be configured in supported in the mount_config.source URL query params, formatted as 'option:default'. If an option is not specified in the volume mount, then the specified default value will be used instead."
   example: "uid:1000,gid:1000,auto-traverse-mounts=1,dircache=0"
   default: "uid:1000,gid:1000"
 nfsv3driver.mount_options:
   description: "Comma separated list of white-listed options that may be configured in the mount_config options, formatted as 'option:default'. If an option is not specified in the volume mount, then the specified default value will be used instead. A specific floppy_mount option tells the driver to ignore unsupported options when set to true, or to fail fast instead when receiving an unsupported option when set to false"
   example: "allow_root:false, allow_other:false, nfs_uid:2000, nfs_gid:2000, auto_cache:true, floppy_mount:true"
   default: "auto_cache:true"
 nfsv3driver.allowed-in-source:
   description: "This is a comma separted list of parameters allowed to be send in share url. Each of this parameters can be specify by brokers"
   example: "uid,gid,auto-traverse-mounts,dircache"
   default: "uid,gid"
  nfsv3driver.default-in-source:
   description: "This is a comma separted list of like params:value. This list specify default value of parameters. If parameters has default value and is not in allowed list, this default value become a forced value who's cannot be override"
   example: "gid=1000,auto-traverse-mounts=1"
   default: ""
  nfsv3driver.allowed-in-mount:
   description: "This is a comma separted list of parameters allowed to be send in extra config. Each of this parameters can be specify by brokers"
   example: ""
   default: ""
  nfsv3driver.default-in-mount:
    description: "This is a comma separted list of like params:value. This list specify default value of parameters. If parameters has default value and is not in allowed list, this default value become a forced value who's cannot be override"
    example: ""
    default: ""

